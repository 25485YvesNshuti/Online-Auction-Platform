<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login - Online Auction Platform</title>
    <link rel="stylesheet" th:href="@{/css/auth.css}" />
</head>
<body style="background: #f7f8fa; font-family: 'Inter', Arial, sans-serif; margin: 0;">
    <style>
        label { font-size: 13px !important; }
        input, select { font-size: 13px !important; height: 38px !important; padding: 0 10px !important; }
        button { font-size: 14px !important; height: 38px !important; }
        h2 { font-size: 20px !important; }
    </style>
    <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 16px;">
        <div style="width: 100%; max-width: 420px;">
            <div style="margin-bottom: 24px;">
                <a th:href="@{/}" style="display: inline-flex; align-items: center; gap: 8px; color: #555; text-decoration: none; font-size: 1rem; font-weight: 500;">
                    <span style="font-size: 1.1rem;">&#8592;</span> Back to Home
                </a>
            </div>
            <div style="background: #fff; border-radius: 18px; box-shadow: 0 4px 24px rgba(0,0,0,0.08); padding: 40px 32px;">
                <div style="text-align: center; margin-bottom: 28px;">
                    <h2 style="color: #10162f; margin: 0 0 8px 0; font-size: 1.4rem; font-weight: 700;">Log In to Your Account</h2>
                    <div style="color: #555; font-size: 1.05rem;">Welcome back to Rwanda Auction Platform</div>
                </div>
                <div th:if="${success}" style="background: #e6f9e6; color: #1a7f37; border-radius: 8px; padding: 12px; margin-bottom: 18px; text-align: center; font-size: 1rem;">[[${success}]]</div>
                <div th:if="${param.success} == 'reset'" style="background: #e6f9e6; color: #1a7f37; border-radius: 8px; padding: 12px; margin-bottom: 18px; text-align: center; font-size: 1rem;">
                    Your password has been reset successfully. Please log in with your new password.
                </div>
                <div th:if="${error}" style="background: #ffeaea; color: #c00; border-radius: 8px; padding: 12px; margin-bottom: 18px; text-align: center; font-size: 1rem;">[[${error}]]</div>
                <div th:if="${param.error}" style="background: #ffeaea; color: #c00; border-radius: 8px; padding: 12px; margin-bottom: 18px; text-align: center; font-size: 1rem;">
                    Invalid username or password.
                </div>
                <form th:action="@{/login}" method="post" th:object="${loginRequest}" autocomplete="off" style="display: flex; flex-direction: column; gap: 18px;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <div>
                        <label for="emailOrPhone" style="display: block; color: #222; font-size: 1rem; margin-bottom: 6px;">Email or Phone Number</label>
                        <input type="text" id="emailOrPhone" th:field="*{emailOrPhone}" placeholder="your.email@example.com or +250..." required style="width: 100%; max-width: 340px; padding: 14px 12px; border: 1.5px solid #e0e3ea; border-radius: 10px; font-size: 1.08rem; background: #f7f8fa; color: #222; font-family: 'Inter', Arial, sans-serif; box-sizing: border-box; transition: border-color 0.2s;" />
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                            <label for="password" style="color: #222; font-size: 1rem;">Password</label>
                            <a th:href="@{/forgot-password}" style="color: #2d6cdf; text-decoration: none; font-size: 0.98rem;">Forgot Password?</a>
                        </div>
                        <div style="position: relative; width: 100%; max-width: 340px;">
                            <input type="password" id="password" th:field="*{password}" placeholder="Enter your password" required style="width: 100%; max-width: 340px; padding: 14px 44px 14px 12px; border: 1.5px solid #e0e3ea; border-radius: 10px; font-size: 1.08rem; background: #f7f8fa; color: #222; font-family: 'Inter', Arial, sans-serif; box-sizing: border-box; transition: border-color 0.2s;" />
                            <button type="button" onclick="togglePassword()" style="position: absolute; right: 14px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #888; font-size: 1.2rem; height: 28px; width: 32px; display: flex; align-items: center; justify-content: center;">
                                <span id="eyeIcon">&#128065;</span>
                            </button>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" id="rememberMe" name="remember-me" style="accent-color: #2d6cdf; width: 18px; height: 18px;" />
                        <label for="rememberMe" style="color: #555; font-size: 1rem; cursor: pointer;">Remember me</label>
                    </div>
                    <button type="submit" id="loginBtn" style="width: 100%; background: #2d6cdf; color: #fff; border: none; border-radius: 8px; padding: 14px; font-size: 1.1rem; font-weight: 600; cursor: pointer; opacity: 0.95; transition: opacity 0.2s, background 0.2s;">Log In</button>
                </form>
                <div style="margin: 28px 0 0 0;">
                    <div style="position: relative; width: 100%; max-width: 340px; margin: 0 auto;">
                        <div style="border-top: 1px solid #e0e3ea; position: absolute; top: 50%; left: 0; right: 0;"></div>
                        <div style="position: relative; text-align: center;">
                            <span style="background: #fff; padding: 0 12px; color: #888; font-size: 0.98rem; position: relative; z-index: 1;">Or continue with</span>
                        </div>
                    </div>
                    <button type="button" style="width: 100%; margin-top: 18px; background: #fff; border: 1px solid #e0e3ea; border-radius: 8px; padding: 12px; font-size: 1rem; color: #222; display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer;">
                        <svg style="width: 20px; height: 20px; margin-right: 8px;" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                        Sign in with Google
                    </button>
                </div>
                <div style="margin-top: 28px; text-align: center; color: #888; font-size: 0.98rem;">
                    Don't have an account? <a th:href="@{/auth/register-buyer}" style="color: #2d6cdf; text-decoration: none; font-weight: 500;">Sign Up</a>
                </div>
                <div style="margin-top: 12px; text-align: center;">
                    <a th:href="@{/register-seller-step1}" style="color: #2d6cdf; text-decoration: none; font-weight: 500;">Register as Seller</a>
                </div>
            </div>
        </div>
    </div>
    <script>
        function togglePassword() {
            var pwd = document.getElementById('password');
            var icon = document.getElementById('eyeIcon');
            if (pwd.type === 'password') {
                pwd.type = 'text';
                icon.textContent = '\u{1F441}\u{FE0E}';
            } else {
                pwd.type = 'password';
                icon.textContent = '\u{1F441}';
            }
        }
        // Show 'Please wait...' on submit
        document.querySelector('form[th\:action="@{/login}"]').addEventListener('submit', function(e) {
            var btn = document.getElementById('loginBtn');
            btn.disabled = true;
            btn.textContent = 'Please wait...';
        });
    </script>
</body>
</html>